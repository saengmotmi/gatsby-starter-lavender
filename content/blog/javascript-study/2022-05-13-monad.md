---
title: 2022-05-13 í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° & ëª¨ë‚˜ë“œ
date: 2022-05-13 00:09:11
description: "[ì£¼ì˜] ì«„ì§€ë§ˆì‹œì˜¤!"
tags: [JavaScript, Functional Programming, Monad]
thumbnail: /thumbnails/hello-world.jpg
---

# 1. í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì´ë€?

![Untitled](./images/monad1.png)

## 1) ì •ì˜ë¥¼ ë°œì·Œí•˜ëŠ” ê²ƒë¶€í„° ì‹œì‘í•´ë³´ì

> ğŸ’¡ â€œí•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì€ ì„±ê³µì ì¸ í”„ë¡œê·¸ë˜ë°ì„ ìœ„í•´ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ìµœëŒ€í•œ ë©€ë¦¬í•˜ê³  ì¡°í•©ì„±ì„ ê°•ì¡°í•˜ëŠ” í”„ë¡œê·¸ë˜ë° íŒ¨ëŸ¬ë‹¤ì„ì´ë‹¤. í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì´ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ìµœëŒ€í•œ ë©€ë¦¬í•˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ë¥¼ ìœ„í•´ì„œë‹¤. í•˜ë‚˜ëŠ” ì˜¤ë¥˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ì„œê³ , ë˜ í•˜ë‚˜ëŠ” ì¡°í•©ì„± í˜¹ì€ ëª¨ë“ˆí™” ìˆ˜ì¤€ì„ ë†’ì´ê¸° ìœ„í•´ì„œë‹¤. (...) ë†’ì€ ëª¨ë“ˆí™” ìˆ˜ì¤€ì€ ìƒì‚°ì„±ì„ ë†’ì´ê³ , ì˜¤ë¥˜ ì—†ëŠ” í•¨ìˆ˜ë“¤ì˜ ì¡°í•©ì€ í”„ë¡œê·¸ë˜ë° ì „ì²´ì˜ ì•ˆì •ì„±ì„ ë†’ì—¬ ì¤€ë‹¤.â€
>
> <í•¨ìˆ˜í˜• ìë°”ìŠ¤í¬ë¦½íŠ¸ í”„ë¡œê·¸ë˜ë°>, ìœ ì¸ë™

> ğŸ’¡ â€œì§„ì§œ ëª©í‘œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¶€ìˆ˜íš¨ê³¼(side effect)ë¥¼ ë°©ì§€í•˜ê³  ìƒíƒœ ë³€ì´(mutation of state)ë¥¼ ê°ì†Œì‹œí‚¤ê¸° ìœ„í•´ ë°ì´í„°ì˜ ì œì–´ íë¦„ê³¼ ì—°ì‚°ì„ ì¶”ìƒ(abstract)í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.â€
>
> <í•¨ìˆ˜í˜• ìë°”ìŠ¤í¬ë¦½íŠ¸>, ë£¨ì´ìŠ¤ ì•„í…ì‹œì˜¤

> ğŸ’¡ â€œí•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì€ ìˆœìˆ˜ í•¨ìˆ˜ì™€ ì„ ì–¸í˜• í”„ë¡œê·¸ë˜ë°ì˜ í† ëŒ€ ìœ„ì— í•¨ìˆ˜ ì¡°í•©(function composition)ê³¼ ëª¨ë‚˜ë“œ ì¡°í•©(monadic composition)ìœ¼ë¡œ ì½”ë“œë¥¼ ì„¤ê³„í•˜ê³  êµ¬í˜„í•˜ëŠ” ê¸°ë²•ì…ë‹ˆë‹¤.â€
>
> <Do it íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ í”„ë¡œê·¸ë˜ë°>, ì „ì˜ˆí™

ì–´ì§€ëŸ¬ìš´ ë‹¨ì–´ë“¤ì´ ë‚˜ì—´ë˜ëŠ” ê°€ìš´ë° `ì¡°í•©`, `ìˆœìˆ˜ í•¨ìˆ˜`, `ë¶€ìˆ˜íš¨ê³¼`, `ì¶”ìƒ` ë“±ì˜ ë‹¨ì–´ê°€ ëˆˆì— ëˆë‹¤.

## 2) ë¬´ì—‡ì¸ì§€ë¥¼ ì„¤ëª…í•˜ê¸° ë³´ë‹¤ ë­ê°€ ì¢‹ì€ì§€ë¥¼ ì„¤ëª…í•˜ëŠ” í¸ì´ ì¢‹ë‹¤

ì—¬ëŸ¬ ìë£Œë“¤ì„ ì°¾ì•„ë³´ë©´ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ë§ì€ ì¥ì  ì¤‘ ë¹ˆë²ˆí•˜ê²Œ ì–¸ê¸‰ë˜ëŠ” ê²ƒë“¤ì„ ê¼½ì•„ ë‚˜ë¦„ì˜ ì •ì˜ë¥¼ ë‚´ë ¤ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

> ğŸ’¡ **ì‘ì§€ë§Œ ì¡°í•©ì„±ì´ ì¢‹ì€ í•¨ìˆ˜ë“¤ì„ í™œìš©í•˜ì—¬ ì„ ì–¸ì ì´ê³  ì•ˆì „í•œ í”„ë¡œê·¸ë˜ë°ì„ í•  ìˆ˜ ìˆë‹¤**

ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ìœ ì§€ ë³´ìˆ˜í•˜ëŠ” ì…ì¥ì—ì„œ í”„ë¡œê·¸ë¨ì˜ ë™ì‘ì„ ì˜ˆì¸¡í•˜ê¸° ì‰¬ì›Œì§€ê³ , í•¨ìˆ˜ì˜ ì‹¤í–‰ ê²°ê³¼ ë˜í•œ ë³´ë‹¤ ì•ˆì „í•´ì§„ë‹¤ëŠ” ëœ»ì´ë‹¤.

- `ìˆœìˆ˜ í•¨ìˆ˜` - í•¨ìˆ˜ì˜ ë™ì‘ì´ í•¨ìˆ˜ ì¸ìì—ë§Œ ì˜ì¡´í•˜ë¯€ë¡œ ë™ì¼í•œ ì…ë ¥ì—ëŠ” í•­ìƒ ê°™ì€ ê°’ì„ ë°˜í™˜í•¨. ë”°ë¼ì„œ í•¨ìˆ˜ ì‹¤í–‰ì— ë”°ë¥¸ ë¶€ìˆ˜ íš¨ê³¼(side effect)ê°€ ì—†ìŒ. ë¬´ìƒíƒœì„±(stateless)ì„ ì§€í–¥í•˜ì—¬ ì™¸ë¶€ ë³€ìˆ˜ì— ì ‘ê·¼ í›„ ì´ë¥¼ ë³€í™”ì‹œí‚¤ëŠ” ë“±ì˜ ë™ì‘ì´ ì—†ìŒ.

  ```tsx
  const sum = (a, b) => a + b;

  let result = 0;
  const sumWithSideEffect = (a, b) => {
    result += a;
    result += b;
    return result;
  };
  ```

- `ë¶ˆë³€ì„±` - ë°ì´í„°ì˜ ë³€ê²½ì´ í•„ìš”í•œ ê²½ìš° ì›ë³¸ ë°ì´í„° êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•¨.

  ```tsx
  const obj = { count: 1 };

  // { ...obj, count: obj.count + 1 } // immutable
  // obj.count += 1 // mutable
  ```

- `ì„ ì–¸í˜• í•¨ìˆ˜` - ëª…ë ¹í˜• í”„ë¡œê·¸ë¨ì´ â€˜ì–´ë–»ê²Œ(How)â€™ì— ì§‘ì¤‘í•˜ëŠ” ë°˜ë©´, ì„ ì–¸í˜• í”„ë¡œê·¸ë˜ë°ì€ â€˜ë¬´ì—‡ì„(What)â€™ì— ì§‘ì¤‘í•˜ëŠ” íŒ¨ëŸ¬ë‹¤ì„. ì´ë¯¸ ë‹¤ë“¤ Reactì—ì„œ ì˜ ì‚¬ìš©í•˜ê³  ìˆëŠ” íŒ¨ëŸ¬ë‹¤ì„.

  ```jsx
  // Imperative (How)
  const newArr = [];
  for (let i = 0; i < arr.length; i++) {
    if (arr[i].length !== 0) {
      newArr.push(arr[i].charAt(0).toUpperCase() + arr[i].substring(1));
    }
  }
  ```

  ```jsx
  // Declarative (What)
  function convert(s) {
    return s.charAt(0).toUpperCase() + s.substring(1);
  }
  const newArr2 = arr.filter((v) => v.length !== 0).map((v) => convert(v));
  ```

ë­ê°€ ì¢‹ì€ì§€ëŠ” ì•Œê² ëŠ”ë°, ì•„ì§ ì´ê²ƒë§Œìœ¼ë¡œëŠ” ê·¸ê±´ ì—¬ì „íˆ ì£¼ì¥ì¼ ë¿ì´ë‹¤. ì–´ë–»ê²Œ ê·¸ëŸ¬í•œ ì¥ì ë“¤ì´ í”„ë¡œê·¸ë˜ë°ì ìœ¼ë¡œ êµ¬í˜„ë  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì‚´í´ë³´ë„ë¡ í•˜ì.

## 3) ì‹¤ì œ ìƒí™©ì„ í†µí•´ ì ‘ê·¼í•´ë³´ê¸°

í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì€ í˜„ì‹¤ì ì¸ ë¬¸ì œì— ëŒ€í•œ ë¶„í•  ì •ë³µ ê³¼ì •ì—ì„œ í•¨ìˆ˜ë¥¼ ë³´ë‹¤ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ëŠ” íŒ¨ëŸ¬ë‹¤ì„ì´ë‹¤. í•¨ìˆ˜ í•©ì„±, ê·¸ë¦¬ê³  í•¨ìˆ˜ê°€ í•©ì„±ë˜ëŠ” ì—°ê²°ë¶€ì—ì„œì˜ ìë£Œ êµ¬ì¡°(ëª¨ë‚˜ë“œ)ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì— ë§ì€ ê³µì„ ë“¤ì¸ë‹¤.

í•¨ìˆ˜ í•©ì„±ì€ í”í•˜ê²Œ ë§Œë‚  ìˆ˜ ìˆëŠ” íŒ¨í„´ì´ë‹¤. ì‰½ê²Œ ë§í•˜ìë©´ ê·¸ëƒ¥ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ ë‹¤ë¥¸ í•¨ìˆ˜ì— ì „ë‹¬í•˜ë©´ í•¨ìˆ˜ë¥¼ í•©ì„±í•œê²Œ ëœë‹¤.

ì–´ì°Œ ë³´ë©´ ê°„ë‹¨í•œ í•¨ìˆ˜ í•©ì„±ì´ ìì£¼ ì‚¬ìš©ë˜ê³  í”„ë¡œê·¸ë˜ë°ì ìœ¼ë¡œ ì˜ë¯¸ë¥¼ ê°–ëŠ” ì´ìœ ê°€ ìˆë‹¤. í•¨ìˆ˜ëŠ” í•˜ë‚˜ì˜ íŠ¹ì •í•œ ë™ì‘ì´ê³  ìš°ë¦¬ê°€ ìµœì¢…ì ìœ¼ë¡œ ë§Œë“¤ í”„ë¡œê·¸ë¨ì€ ì—¬ëŸ¬ ë™ì‘ì„ ìŒ“ì•„ì˜¬ë¦° ê²°ê³¼ë¬¼ì´ ëœë‹¤. ì¦‰, ì–´ë ¤ìš´ ë¬¸ì œë¥¼ ì—¬ëŸ¬ ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ í‘¸ëŠ” `ë¶„í•  ì •ë³µ` ê³¼ ê°™ì€ ë§¥ë½ì´ë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ í‘œí˜„í•œ í•¨ìˆ˜ í•©ì„±ì€ ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ë‹¤.

```tsx
const compose = (fn1, fn2) => (x) => fn1(fn2(x));
```

ì—¬ê¸° ê°’ì„ ë”í•˜ê³  ë¹¼ëŠ” ë‘ ê°€ì§€ í•¨ìˆ˜ê°€ ìˆë‹¤. ë‘ í•¨ìˆ˜ë¥¼ ì‹¤ì œë¡œ í•©ì„±í•´ë³´ì.

```tsx
const plus = (a) => a + 1;
const minus = (a) => a - 1;

plus(minus(1)); // 1
```

ì „í˜€ ì–´ë µì§€ ì•Šë‹¤. í•˜ì§€ë§Œ ë‘ í•¨ìˆ˜ ì¤‘ ì–´ëŠ í•˜ë‚˜ì—ë¼ë„ ì¸ìë¥¼ ë„£ì§€ ì•Šê³  ì‹¤í–‰í•˜ê²Œ ë˜ë©´ ê²°ê³¼ëŠ” `NaN` ê°€ ë‚˜ì˜¤ê³ , í”„ë¡œê·¸ë¨ì€ ê¹¨ì§€ê²Œ ëœë‹¤.

ìš°ë¦¬ê°€ ì‹¤ì œ ë¡œì§ì„ ì‘ì„±í•  ë•Œ ë˜í•œ ë‹¤ìŒê³¼ ê°™ì€ ì§€ì˜¥ì˜ `ë„(null) ì²´í¬` ë¥¼ í•˜ê²Œ ë˜ëŠ” ì¼ì´ ìƒê°ë³´ë‹¤ ë¹ˆë²ˆí•˜ë‹¤. ì•„ë˜ ì˜ˆì‹œëŠ” ê°ì²´ë¥¼ íƒ€ê³  ë“¤ì–´ê°€ ê°’ì„ êº¼ë‚´ê¸° ìœ„í•´ ifë¬¸ì„ ì‚¬ìš©í•´ ê°œë°œìê°€ í•œë•€ í•œë•€ ë„ ì²´í¬ë¥¼ í•´ì£¼ê³  ìˆëŠ” ìƒí™©ì´ë‹¤. ifë¬¸ ë°”ê¹¥ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ë¥¼ ì½ì–´ì˜¤ëŠë¼ ì½”ë“œë¥¼ ì½ëŠ” ì‹œì„ ë„ ì˜¤ë½ê°€ë½í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œì˜ íë¦„ì´ í•œëˆˆì— ë“¤ì–´ì˜¤ì§€ ì•ŠëŠ”ë‹¤.

ë•Œë¬¸ì— í•¨ìˆ˜ì˜ í•µì‹¬ì ì¸ ë™ì‘ê³¼ ê·¸ë ‡ì§€ ì•Šì€ ë¶€ê°€ì ì¸ ë¶€ë¶„ì´ ì˜ ë¶„ë¦¬ë˜ì–´ ìˆì§€ ì•Šì€ ëŠë‚Œì„ ë°›ê²Œ ë˜ê³ , ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ì€ ì½”ë“œê°€ ì•„ë‹ˆë¼ëŠ” ê²°ë¡ ì— ë‹¤ë‹¤ë¥´ê²Œ ëœë‹¤.

```tsx
function getCountry(student) {
  let school = student.school();

  if (school !== null) {
    let address = school.address();

    if (address !== null) {
      return address.country();
    }
  }
  return "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” êµ­ê°€ì…ë‹ˆë‹¤!";
}
```

![Untitled](./images/monad2.png)

í•˜ì§€ë§Œ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ì„±ê°€ì‹  ë„ ì²´í¬ë‚˜, ì‹¬ì§€ì–´ try - catch ê°™ì€ ë³„ë„ì˜ ì—ëŸ¬ì²˜ë¦¬ë„ í•˜ì§€ ì•ŠëŠ”ë‹¤. ì¼ë‹¨ ìœ„ ì˜ˆì œë¥¼ í•¨ìˆ˜í˜•ìœ¼ë¡œ ë°”ê¿” ì“¸ ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ë°”ê¿”ì“¸ ìˆ˜ ìˆë‹¤.

```tsx
const find = (db, id) => // nullable(null, undefined)ì„ ë˜ì§ˆ ìˆ˜ë„ ìˆëŠ” ë¡œì§
const safeFindStudent = R.curry((db, id) => Maybe.fromNullable(find(db, id)))

// R.prop('x')({ x: 100 }); // 100, ê°ì²´ì—ì„œ íŠ¹ì • í‚¤ ê°’ì— í•´ë‹¹í•˜ëŠ” valueë¥¼ ë½‘ëŠ” ì—°ì‚°
// ì„¸ ì†ì„± ì¤‘ í•˜ë‚˜ë¼ë„ ê²°ê³¼ê°€ Nothing ëª¨ë‚˜ë“œë¼ë©´ ì´í›„ ì—°ì‚°ì€ ì „ë¶€ ê±´ë„ˆ ëœ€
const getCountry = (student) => student
	.map(R.prop("school"))
	.map(R.prop("address"))
	.map(R.prop("country"))
	.getOrElse("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” êµ­ê°€ì…ë‹ˆë‹¤!") // Maybe.getOrElse()

// R.compose - ì¸ìë¡œ ë°›ì€ í•¨ìˆ˜ë¥¼ ë’¤ì—ì„œ ì•ìœ¼ë¡œ ì‹¤í–‰í•´ë‚˜ê°
const country = R.compose(
	getCountry,
	safeFindStudent
);
```

ì´ëŸ° ì¼ì´ ì–´ë–»ê²Œ ê°€ëŠ¥í•œê±¸ê¹Œ?

ì´ ë¹„ë°€ì„ í’€ê¸° ìœ„í•´ ì˜ˆì œ ì½”ë“œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” `Maybe`ì— ì£¼ëª©í•  í•„ìš”ê°€ ìˆë‹¤. MaybeëŠ” `Just`ì™€ `Nothing` ì„ ë‘ í•˜ìœ„í˜•ìœ¼ë¡œ ê°–ê³  ìˆëŠ” `íƒ€ì… í´ë˜ìŠ¤(type class)` ì´ë‹¤. íƒ€ì… í´ë˜ìŠ¤ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ ë•Œ íŠ¹ë³„í•œ íƒ€ì…ìœ¼ë¡œ ì œì•½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì ë§Œ ì–¸ê¸‰í•´ë‘ê² ë‹¤(ex. `Monad<T>`).

Maybeê°€ ë¬´ì—‡ì¸ì§€ë³´ë‹¤ ì´ê²ƒì´ ê°–ëŠ” ì˜ë¯¸ì— ëŒ€í•´ ì¢€ ë” ê³±ì”¹ì–´ ë³´ì. ì´ë¯¸ ìš°ë¦¬ê°€ ì˜ ì•Œê³  ìˆëŠ” ì§€ì‹ì— ë¹—ëŒ€ì–´ë³´ìë©´, ë§ˆì¹˜ Promiseê°€ ë¹„ë™ê¸° ìƒí™©ì„ ê°’ìœ¼ë¡œ ë°”ê¾¸ì–´ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ `êµ¬ìƒí™”(reify)` ì‹œí‚¨ ê²ƒê³¼ ìœ ì‚¬í•œ ì»¨ì…‰ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ê´€ì ì—ì„œ ë³´ìë©´ MaybeëŠ” ì—ëŸ¬ ìƒí™©ì„ ë„ ì²´í¬ ë¡œì§ì„ êµ¬ìƒí™” í•œ ê²ƒì´ë‹¤. ìŠ¤ì¹¼ë¼ì—ì„œëŠ” Maybeë¥¼ Optionalì´ë¼ê³  ë¶€ë¥¸ë‹¤. ëœ»ë§Œ ë³´ìë©´ ì´ìª½ì´ ì¢€ ë” ì™€ë‹¿ëŠ” ëŠë‚Œì´ë‹¤.

`Either`ë¼ëŠ” ê²ƒë„ ìˆë‹¤. EitherëŠ” ì ˆëŒ€ë¡œ ë™ì‹œì— ë°œìƒí•˜ì§€ ì•ŠëŠ” ë‘ ê°’ a(Left - ì—ëŸ¬ ë©”ì‹œì§€ ë˜ëŠ” ì˜ˆì™¸ ê°ì²´ë¥¼ ë‹´ìŒ), b(Right - ì„±ê³µí•œ ê°’ì„ ë‹´ìŒ)ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ êµ¬ë¶„í•œ ìë£Œêµ¬ì¡°ë‹¤. ì¦‰, ì—ëŸ¬ ìƒí™©ì„ ê°’ìœ¼ë¡œ êµ¬ìƒí™” í•œ ì¼€ì´ìŠ¤ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

# 2. ëª¨ë‚˜ë“œ(Monad)

![Untitled](./images/monad3.png)

## 1) ê°’ì„ ì»¨í…Œì´ë„ˆì— ì‹¸ì„œ ë“œì…”ë³´ì„¸ìš”

![Untitled](./images/monad4.png)

Umm~ Yummy~~

Maybeì™€ EitherëŠ” ì¡ì‹œ ë¯¸ë¤„ë‘ê³  ì•ì—ì„œ ì§€ë‚˜ê°€ë“¯ ì–¸ê¸‰í–ˆë˜ Promiseë¥¼ ë‹¤ì‹œ ì‚´í´ë³´ì. PromiseëŠ” ì•ì„œ ë§í•œ ê²ƒì²˜ëŸ¼ `ë¹„ë™ê¸° ìƒí™©ì„ ê°’ìœ¼ë¡œ ë³€í™˜` í•´ì£¼ëŠ” ë„êµ¬ë‹¤. ì½œë°± í•¨ìˆ˜ì— ë¹„í•´ ì˜ˆì™¸ì²˜ë¦¬ë‚˜ ê²°ê³¼ ê°’ì„ ì—°ì‡„ì ìœ¼ë¡œ ì²˜ë¦¬í•  ë•Œ í° ê°•ì ì„ ê°–ë‹¤.

ìƒˆì‚¼ìŠ¤ë ˆ ì‚´í´ë³´ìë©´ PromiseëŠ” `.then()`, `.catch()`, `.finally()` ë©”ì„œë“œë¥¼ ê°–ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ í´ë˜ìŠ¤ë‹¤.

```tsx
const asyncThing = new Promise((res, rej) => {
	// ...
})
	.then(...)
	.catch(...)
	.finally(...)
```

PromiseëŠ” ë¹„ë™ê¸° ìš”ì²­ ì„±ê³µ ì‹œ thenìœ¼ë¡œ, ì‹¤íŒ¨ ì‹œ catchë¡œ ë¶„ê¸°ì‹œí‚¤ëŠ” ë“± ê°’ì„ ì•ˆì „í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤. Promiseë¼ëŠ” ì»¨í…Œì´ë„ˆë¡œ ë¹„ë™ê¸° ìƒí™©ì„ ê°ì‹¼ ë•ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

ì•ì„œ í•¨ìˆ˜ í•©ì„±ì„ ì†Œê°œí•˜ë©° ì–¸ê¸‰í–ˆë˜ ê°„ë‹¨í•œ ì˜ˆì‹œë„ ë‹¤ì‹œ í•œë²ˆ ì‚´í´ë³´ì. ë°°ì—´ë¡œ ê°ì‹¸ì§€ ì•Šê³  ê°’ì„ ê·¸ëƒ¥ ë‹¤ë¤˜ì„ ë•ŒëŠ” ê°’ì˜ ìœ ë¬´ì— ë”°ë¼ í•¨ìˆ˜ê°€ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼°ë‹¤.

ë°°ì—´ë¡œ í•œë²ˆ ê°ì‹¸ë‹ˆ ê°’ì´ ì—†ì„ ë•ŒëŠ” í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. ê°’ì„ ë°°ì—´ì´ë¼ëŠ” ìë£Œ êµ¬ì¡°ë¡œ ê°ì‹¸ë©´ì„œ í•¨ìˆ˜ í•©ì„±ì„ ë³´ë‹¤ ì•ˆì „í•˜ê²Œ í•  ìˆ˜ ìˆê²Œ ëœ ê²ƒì´ë‹¤.

```tsx
const plus = (a) => a + 1
const minus = (a) => a - 1

plus(minus(1)) // 1
plus(minus()) // NaN

// Arrayê°€ ì¶œë™í•œë‹¤ë©´?
[1].map(plus).map(minus).forEach(res => console.log(res))
[].map(plus).minus(minus).forEach(res => console.log(res))
```

í–„ì„ ê¹€ì¹˜ì— ì‹¸ì„œ ë¨¹ìœ¼ë©´ ë§›ìˆë“¯ì´, ê°’ì„ ì ì ˆí•œ ìë£Œêµ¬ì¡°ë¡œ ê°ì‹¸ì„œ ë‹¤ë£¨ë©´ ë” ì¢‹ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. ë°”ë¡œ ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì´ ëª¨ë‚˜ë“œê°€ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œ í•˜ëŠ” ì—­í• ì´ë‹¤.

## 2) ë“œë””ì–´ ëª¨ë‚˜ë“œ...

`ëª¨ë‚˜ë“œ(Monad)`ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•œ ì„œë¬¸ì´ ê¸¸ì—ˆë‹¤. ì´ë ‡ê²Œ ì•ì„ ê¸¸ê²Œ ëº€ ì´ìœ ê°€ ìˆë‹¤. ëª¨ë‚˜ë“œë¥¼ êµ¬ê¸€ì— ê²€ìƒ‰í•˜ë‹¤ë³´ë©´ ì—¬ëŸ¬ê°€ì§€ ìš°ìŠ¤ê°œ ì†Œë¦¬ë¥¼ ë§Œë‚˜ê²Œ ëœë‹¤.

![Untitled](./images/monad5.png)

> ğŸ’¡ [ì´ê±´ ë‚˜í•œí…Œ ì¼ì£¼ì¼ì— í•œë²ˆ ê¼´ë¡œ ì¼ì–´ë‚˜ëŠ” ì¼ì´ë‹¤]
>
> ë‚˜ : ì™€ ì”¨ ë‚˜ ë“œë””ì–´ ëª¨ë‚˜ë“œ(~~ì–‘ìì—­í•™~~)ê°€ ë­”ì§€ ì´í•´í•œê±° ê°™ìŒ!
>
> ì¹œêµ¬ : ì§„ì§œ?
>
> ë‚˜ : ì•„ ì ê¹ë§Œ, ê¹Œë¨¹ìŒ...ã…ã…;;

ì´ëŸ° ë†ë‹´ì´ë¼ë“ ì§€, ì•„ë‹ˆë©´ ì´ëŸ° ì´ì•¼ê¸°ë“¤ì´ ëŒì•„ë‹¤ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤.

> ğŸ’¡ ì–´ë–¤ ê°œë…ì„ ë¹„ë¡œì†Œ ê¹¨ë‹«ëŠ” ìˆœê°„ì„Â â€˜Aha momentâ€™ë¼ ë¶€ë¥´ê¸°ë„ í•˜ëŠ”ë°, ë”ê¸€ë¼ìŠ¤ í¬ë¡í¬ë“œì˜ ë§ì„ ì¸ìš©í•˜ìë©´, ëª¨ë‚˜ë“œë¥¼ ì´í•´í•˜ëŠ” Aha momentë¥¼ ê²ªëŠ” ìˆœê°„, ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ëª¨ë‚˜ë“œë¥¼ ì„¤ëª…í•  ìˆ˜ ì—†ê²Œ ë˜ëŠ”Â [ì €ì£¼](https://stackoverflow.com/questions/19544794/what-is-crockfords-law)ì— ê±¸ë¦°ë‹¤ê³  í•œë‹¤.
> ([https://lqez.dev/blog/the-curse-of-understanding.html](https://lqez.dev/blog/the-curse-of-understanding.html))

ê·¸ë˜ì„œ ê²ë¨¹ì§€ ë§ìê³  ë‚˜ë¦„ëŒ€ë¡œ í‹ˆí‹ˆì´ ë¹Œë“œì—…ì„ ê¹”ì•„ë’€ë‹¤. í•µì‹¬ì´ ì¤‘ìš”í•˜ë¯€ë¡œ, ë‹¤ì‹œ ìš°ë¦¬ê°€ ë­˜ ì•Œê³  ì‹¶ì—ˆëŠ”ì§€ë¥¼ ìƒê°í•˜ë©° í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì„ í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ë¦¬í•´ ë˜ì§šì–´ë³´ì.

> ğŸ’¡ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì€ í˜„ì‹¤ì ì¸ ë¬¸ì œì— ëŒ€í•œ ë¶„í•  ì •ë³µ ê³¼ì •ì—ì„œ í•¨ìˆ˜ë¥¼ ë³´ë‹¤ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ëŠ” íŒ¨ëŸ¬ë‹¤ì„ì´ë‹¤. í•¨ìˆ˜ í•©ì„±, ê·¸ë¦¬ê³  í•¨ìˆ˜ê°€ í•©ì„±ë˜ëŠ” ì—°ê²°ë¶€ì—ì„œì˜ ìë£Œ êµ¬ì¡°(ëª¨ë‚˜ë“œ)ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì— ë§ì€ ê³µì„ ë“¤ì¸ë‹¤.

í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì€ í•¨ìˆ˜ í•©ì„±ê³¼, ê·¸ í•©ì„± ì‚¬ì´ì— ì¡´ì¬í•˜ëŠ” ì—°ê²°ë¶€ë¥¼ ë§¤ë„ëŸ½ê²Œ ì´ì–´ì£¼ëŠ” ì ì ˆí•œ ìë£Œ êµ¬ì¡°ë¡œ ë³€í™˜ì‹œì¼œì£¼ëŠ” ì‘ì—…ì„ ì¤‘ì‹¬ì— ë‘ê³  ì„±ë¦½í•˜ëŠ” íŒ¨ëŸ¬ë‹¤ì„ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ë‹¨ìˆœíˆ ë°°ì—´ ë©”ì„œë“œì˜ ì²´ì´ë‹ ì •ë„ë¡œ ì´í•´í•˜ë©´ ë§ì´ ì•„ì‰¬ìš´ ì´ìœ ë‹¤.

ë‹¤ì‹œ í•œë²ˆ ì˜ˆì‹œ ì½”ë“œë¥¼ í†µí•´ ì ‘ê·¼í•´ë³´ì. í•µì‹¬ì€ ì—ëŸ¬ê°€ ë‚ ì§€ë„ ëª¨ë¥´ëŠ” ì–´ë– í•œ ê°’ì„ ë˜í¼ ê°ì²´ë¡œ ê°ì‹¸ ê²©ë¦¬ì‹œí‚¨ë‹¤ëŠ” ì ì´ë‹¤.

```tsx
class Wrapper {
  constructor(value) {
    this._value = value;
  }

  map(f) {
    return new Wrapper(f(this._value));
  }
}

const wrap = (v) => new Wrapper(v);

const wrappedValue = wrap("hello, fp!");

// R.identity - (v) => v // í•­ë“± í•¨ìˆ˜, ìº¡ìŠí™”í•œ ìë£Œí˜•ì—ì„œ ê°’ì„ êº¼ë‚¼ ë•Œ ì‚¬ìš©
wrappedValue.map(R.identity); // "hello, fp!"
wrappedValue.map(R.toUpper); // "HELLO, FP!"
```

ì´ë ‡ê²Œ í•˜ë©´ ì»¨í…Œì´ë„ˆ ì•ˆì— ë„£ì–´ ê°’ì„ ì–»ê³  ì‹¶ì€ ì½”ë“œëŠ” ë¬´ì¡°ê±´ `map` ì„ í†µí•´ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ëœë‹¤. ë‹¤ë§Œ í•¨ìˆ˜ë¥¼ ì—¬ëŸ¿ ì²´ì´ë‹í•˜ëŠ” ìƒí™©ì—ì„œ ì´ ê°’ì´ nullì´ë‚˜ undefinedë¼ë©´ ê³³ê³³ì—ì„œ ëŸ°íƒ€ì„ ì—ëŸ¬ë¡œ ë¡œì§ì´ í„°ì ¸ë‚˜ê°€ê³ , í•¨ìˆ˜ë¥¼ í•©ì„±í•˜ê¸° ë§¤ìš° ê³¤ë€í•  ê²ƒì´ë‹¤.

ì´ì œ ê·¸ê°„ ìš°ë¦¬ê°€ ì²˜ë¦¬í•´ì¤¬ë˜ ë„ ì²´í¬ë¥¼ `Wrapper` í´ë˜ìŠ¤ì— ìœ„ì„í•˜ì—¬ ëŒ€ì‹  ì²˜ë¦¬í•˜ë„ë¡ í•˜ê³ , í•µì‹¬ì ì¸ ë¡œì§ë“¤ì—ë§Œ ì†ëŒ€ê¸° ìœ„í•œ ì‘ì—…ìœ¼ë¡œ ë„˜ì–´ê°€ë³´ë„ë¡ í•˜ì.

ì°¸ê³ ë¡œ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œëŠ” ì´ë ‡ê²Œ mapì„ êµ¬í˜„í•˜ê³  ìˆëŠ” í´ë˜ìŠ¤ë¥¼ `í‘í„°(functor, í•¨ìˆ˜ì)` ë¼ê³  ë¶€ë¥¸ë‹¤. í‘í„°ëŠ” ê°’ì„ ë˜í¼ ì•ˆìœ¼ë¡œ `ìŠ¹ê¸‰(lifting, ê°’ì„ ì»¨í…Œì´ë„ˆë¡œ ê°ìŒˆ)`í•œ ë‹¤ìŒ í•¨ìˆ˜ë¥¼ ì ìš©í•˜ê³  ë‹¤ì‹œ ë˜í¼ì— ë„£ì„ ëª©ì ì„ ì—¼ë‘ì— ë‘” í•¨ìˆ˜ ë§¤í•‘ì´ ê°€ëŠ¥í•œ ìë£Œêµ¬ì¡°ë‹¤. `Array.prototype.map()` ì„ ë– ì˜¬ë ¤ë„ ì¢‹ë‹¤.

## 3) ì—´ê³  ë‹«ê³ , ì—´ê³  ë‹«ê³ , ì—´ê³  ë‹«ê³ ...

ìœ„ì—ì„œ êµ¬í˜„í–ˆë˜ WrapperëŠ” ìµœì´ˆì— ê°’ì´ ì…ë ¥ëœ ì´í›„ mapìœ¼ë¡œ ì „ë‹¬ëœ í•¨ìˆ˜ë¥¼ í†µí•´ì„œë§Œ ê°’ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ë°, ê·¸ ê²°ê³¼ê°’ì„ ë‹¤ì‹œ Wrapperë¡œ ê°ì‹¸ì„œ ë¦¬í„´í•˜ê³  ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì´ë ‡ê²Œ ìê¸° ìì‹ ìœ¼ë¡œ ë‹¤ì‹œ í•œë²ˆ ë” ê°ì‹¸ì„œ ë¦¬í„´í•˜ëŠ” ì´ìœ ëŠ”, ì•ì„œ ì´ì•¼ê¸° í–ˆë˜ í•¨ìˆ˜ í•©ì„±ì˜ ì—°ê²°ë¶€ì—ì„œ íƒ€ì…ì´ ë‹¬ë¼ì ¸ì„œ ì²´ì¸ì´ ëŠê¸°ëŠ” ì‚¬íƒœë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•¨ì´ë‹¤.

ê³„ì† ì–¸ê¸‰í–ˆë˜ `Array.prototype.map()` ì™€ `Promise` ë¿ë§Œ ì•„ë‹ˆë¼ ì‹¬ì§€ì–´ DOMì„ ì»¨í…Œì´ë„ˆë¡œ ê°ì‹¸ ì²´ì´ë‹í•œë‹¤ëŠ” ì ì—ì„œ ì œì´ì¿¼ë¦¬(`$`) ê¹Œì§€ë„ ì²´ì´ë‹ íŒ¨í„´ì„ êµ¬í˜„í•˜ê³  ìˆê³ , ì´ëŠ” ì´ë“¤ ëª¨ë‘ ìê¸° ìì‹ ì„ ë¦¬í„´í•˜ëŠ”, í˜•ì‹ì„ ë³´ì¡´í•˜ëŠ” í•¨ìˆ˜ìì„ì„ ë‚˜íƒ€ë‚¸ë‹¤. ì¦‰, ìš°ë¦¬ëŠ” í‘í„°ë¥¼ ê³„ì†í•´ì„œ ì¨ì˜¤ê³  ìˆì—ˆë˜ ì…ˆì´ë‹¤.

![Untitled](./images/monad6.png)

[https://www.cocoawithlove.com/blog/an-aside-about-flatmap-and-monads.html](https://www.cocoawithlove.com/blog/an-aside-about-flatmap-and-monads.html)

ì´ì œ í‘í„°ì— ëŒ€í•´ ì¶©ë¶„íˆ ëœ¸ì„ ë“¤ì´ë©° ê°ì„ ì¡ì•˜ìœ¼ë‹ˆ ëª¨ë‚˜ë“œê¹Œì§€ ë‚˜ì•„ê°€ë³´ì.

ëª¨ë‚˜ë“œë€,

> ğŸ’¡ ëª¨ë‚˜ë“œëŠ” í‘í„°, ì–´í”Œë¼ì´, ì–´í”Œë¦¬ì»¤í‹°ë¸Œ, ì²´ì¸ì˜ íŠ¹ì§•ì„ ëª¨ë‘ êµ¬í˜„í•œ íƒ€ì… í´ë˜ìŠ¤ë‹¤.

![Untitled](./images/monad7.png)

íŒíƒ€ì§€ ëœë“œ ê·œê²©

ìœ„ ë„ì‹ì€ [íŒíƒ€ì§€ ëœë“œ(Fantasy Land) ê·œê²©](https://github.com/fantasyland/fantasy-land)ì—ì„œ ë°œì·Œí•œ ê²ƒì´ë©° í•˜ìŠ¤ì¼ˆ(Haskell) í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì¡°ë¥¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë°©ì‹ìœ¼ë¡œ ì¬êµ¬ì„±í•œ ê²ƒì´ë‹¤.

- `í‘í„°(Functor, í•¨ìˆ˜ì)` : `map`ì´ë¼ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ ê°€ì§€ëŠ” í´ë˜ìŠ¤. í•¨ìˆ˜ë¥¼ í¬ì¥ëœ ê°’ì— ì ìš©í•œë‹¤.

- `ì–´í”Œë¼ì´(Apply)` : í‘í„°ì´ë©´ì„œ `ap`ë¼ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ ê°€ì§€ëŠ” í´ë˜ìŠ¤

- `ì–´í”Œë¦¬ì»¤í‹°ë¸Œ(Applicative)` : ì–´í”Œë¼ì´ì´ë©´ì„œ `of`ë¼ëŠ” í´ë˜ìŠ¤ ë©”ì„œë“œë¥¼ ê°€ì§€ëŠ” í´ë˜ìŠ¤. í¬ì¥ëœ í•¨ìˆ˜ë¥¼ í¬ì¥ëœ ê°’ì— ì ìš©í•œë‹¤.

- `ì²´ì¸(Chain)` : ì–´í”Œë¦¬ì»¤í‹°ë¸Œì´ë©´ì„œ chainì´ë¼ëŠ” ë©”ì„œë“œë¥¼ ê°€ì§€ëŠ” í´ë˜ìŠ¤

- `ëª¨ë‚˜ë“œ(Monad)` : ëª¨ë‚˜ë“œëŠ” í‘í„°, ì–´í”Œë¼ì´, ì–´í”Œë¦¬ì»¤í‹°ë¸Œ, ì²´ì¸ì˜ íŠ¹ì§•ì„ ëª¨ë‘ êµ¬í˜„í•œ íƒ€ì… í´ë˜ìŠ¤. í¬ì¥ëœ ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì— í¬ì¥ëœ ê°’ì„ ì ìš©í•œë‹¤.

ê·¸ë¦¬ê³ , ëª¨ë‚˜ë“œëŠ” ë‹¤ìŒ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¤€ìˆ˜í•´ì•¼ í•œë‹¤.

- `í˜•ì‹ ìƒì„±ì(type constructor)` : ëª¨ë‚˜ë“œí˜•(ëª¨ë‚˜ë“œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤ì œë¡œ êµ¬í˜„í•œ í˜•ì‹)ì„ ìƒì„±

- `ë‹¨ìœ„ í•¨ìˆ˜(unit function)` : ì–´ë–¤ í˜•ì‹ì˜ ê°’ì„ ëª¨ë‚˜ë“œì— ì‚½ì…í•¨. `of` ë¡œ ëª…ëª….

- `ë°”ì¸ë“œ í•¨ìˆ˜(bind function)` : ì—°ì‚°ì„ ì„œë¡œ ì²´ì´ë‹ í•¨. í•¨ìˆ˜ìì˜ fmapì— í•´ë‹¹, í¸ì˜ìƒ mapìœ¼ë¡œ ì¤„ì—¬ ë¶€ë¦„.

- `ì¡°ì¸ ì—°ì‚°(join operation)` : ëª¨ë‚˜ë“œ ìë£Œêµ¬ì¡°ì˜ ê³„ì¸µì„ ëˆŒëŸ¬ í„. ëª¨ë‚˜ë“œ ë°˜í™˜ í•¨ìˆ˜ë¥¼ ë‹¤ì¤‘ í•©ì„±í•  ë•Œ ì¤‘ìš”í•¨.

í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê±´, ëª¨ë‚˜ë“œê°€ ë‹¨ìˆœíˆ í•¨ìˆ˜ìì˜ í´ë˜ìŠ¤ì— ëª‡ ê°€ì§€ ë©”ì„œë“œë¥¼ ì¶”ê°€ë¡œ êµ¬í˜„í•œ í˜•íƒœì— ì§€ë‚˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì´ë‹¤. ê·¸ ë§ì„ ì¦ëª…í•˜ê¸° ìœ„í•´ ì•„ê¹Œ ë§Œë“¤ì—ˆë˜ Wrapper í´ë˜ìŠ¤ë¥¼ ëª¨ë‚˜ë“œë¡œ ë§Œë“¤ì–´ë³´ì.

```tsx
class Wrapper {
  // í˜•ì‹ ìƒì„±ì
  constructor(value) {
    this._value = value;
  }

  static of(a) {
    // ë‹¨ìœ„ í•¨ìˆ˜
    return new Wrapper(a);
  }

  map(f) {
    // ë°”ì¸ë“œ í•¨ìˆ˜ (í•¨ìˆ˜ì)
    return Wrapper.of(f(this._value));
  }

  join() {
    // ì¡°ì¸ ì—°ì‚° - ì¤‘ì²©ëœ ê³„ì¸µì„ ëˆŒëŸ¬ í„
    if (!(this._value instanceof Wrapper)) {
      return this;
    }
    return this._value.join();
  }

  get() {
    return this._value;
  }

  toString() {
    // ìë£Œêµ¬ì¡°ë¥¼ ë‚˜íƒ€ë‚¸ ë¬¸ìì—´ì„ ë°˜í™˜
    return `Wrapper (${this._value})`;
  }
}
```

ê·¸ë¦¬ê³  ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•œë‹¤.

```tsx
// Wrapper("HELLO, MONADS!")
Wrapper.of("Hello, Monads!").map(R.toUpper).map(R.indentity);
```

ì´ì œ ëª¨ë‚˜ë“œë¥¼ ì§ì ‘ êµ¬í˜„í•œ ì½”ë“œë¥¼ ì‚´í´ë³´ë©° ëª¨ë‚˜ë“œì˜ ì‹¤ì²´ì— ì ‘ê·¼í•´ë³¼ ì°¨ë¡€ë‹¤.

# 3. ë„ ì²´í¬ë¥¼ ìœ„í•œ Maybe

## 1) Maybe ëª¨ë‚˜ë“œ êµ¬í˜„

![Untitled](./images/monad8.png)

[https://lazyswamp.tistory.com/entry/functorsapplicativesandmonadsinpictures](https://lazyswamp.tistory.com/entry/functorsapplicativesandmonadsinpictures)

Maybe ëª¨ë‚˜ë“œëŠ” ë‹¤ìŒ í•˜ìœ„ íƒ€ì… í´ë˜ìŠ¤ë“¤ë¡œ êµ¬ì„±ëœë‹¤.

- `Just(value)` : ì¡´ì¬í•˜ëŠ” ê°’ì„ ê°ì‹¼ ì»¨í…Œì´ë„ˆ
- `Nothing()` : ê°’ì´ ì—†ëŠ” ì»¨í…Œì´ë„ˆ, ë˜ëŠ” ì¶”ê°€ ì •ë³´ ì—†ì´ ì‹¤íŒ¨í•œ ì»¨í…Œì´ë„ˆ. ì´ë¥¼ ì‚¬ìš©í•´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê°’ì—ë„ í•¨ìˆ˜ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŒ.

ì‹¤ì œ Maybeë¥¼ êµ¬í˜„í•œ ì½”ë“œë¥¼ í™•ì¸í•´ë³´ì.

```tsx
class Maybe {
  // ì»¨í…Œì´ë„ˆ í˜• - ë¶€ëª¨ í´ë˜ìŠ¤
  static just(a) {
    return new Just(a);
  }

  static nothing() {
    return new Nothing();
  }

  static fromNullable(a) {
    return a !== null ? Maybe.just(a) : Maybe.nothing();
  }

  static of(a) {
    return just(a);
  }

  get isNothing() {
    return false; // MaybeëŠ” Nothingì´ ì•„ë‹˜
  }

  get isJust() {
    return false; // MaybeëŠ” Justê°€ ì•„ë‹˜
  }
}
```

ëª‡ ê°€ì§€ ëˆˆì—¬ê²¨ë³¼ ë¶€ë¶„ì´ ìˆë‹¤.

- ë‹¨ìœ„ í•¨ìˆ˜ì¸ `of` ê°€ static ë©”ì„œë“œë¡œ ë“¤ì–´ìˆë‹¤. ì–´ë–¤ ê°’ì„ Maybe ëª¨ë‚˜ë“œë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” `Maybe.of(a)` ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

- ë˜ ë‹¤ë¥¸ static ë©”ì„œë“œì¸ `.fromNullable()` ì€ ì¸ìë¥¼ ë°›ì•„ ê·¸ê²ƒì´ nullì¸ì§€ ì²´í¬í•˜ê³ , ë§Œì•½ ìœ íš¨í•œ ê°’ì´ë©´ `.just(a)` ë¡œ `Just` ëª¨ë‚˜ë“œë¥¼ ìƒì„±í•´ ë¦¬í„´í•˜ê³ , nullì´ë¼ë©´ `Nothing` ì„ ìƒì„±í•´ ë¦¬í„´í•œë‹¤. ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë“¯ Justì™€ Nothingì€ Maybeë¥¼ ìƒì†ë°›ì€ í•˜ìœ„ í´ë˜ìŠ¤ë‹¤.

## 2) Just ëª¨ë‚˜ë“œ êµ¬í˜„

```tsx
class Just extends Maybe {
  // ê°’ì´ ìˆëŠ” ê²½ìš°ì— í•´ë‹¹í•˜ëŠ” Maybe í•˜ìœ„í˜•
  constructor(value) {
    super();
    this._value = value;
  }

  get value() {
    return this._value;
  }

  map(f) {
    // Justì— í•¨ìˆ˜ë¥¼ ë§¤í•‘í•˜ê³  ê°’ì„ ë³€í™˜ í›„, ë‹¤ì‹œ ì»¨í…Œì´ë„ˆì— Wrapping (Just / Nothing)
    return Maybe.fromNullable(f(this._value));
  }

  getOrElse() {
    return this._value; // ìë£Œ êµ¬ì¡° ê°’ì„ ì¶”ì¶œ
  }

  filter(f) {
    return Maybe.fromNullable(f(this._value) ? this._value : null);
  }

  chain() {
    return f(this.value);
  }
}
```

Promiseë¡œ ì¹˜ë©´ resolveì— í•´ë‹¹í•˜ëŠ” Justë„ ì‚´í´ë³´ì.

- JustëŠ” Maybeë¥¼ ìƒì† ë°›ëŠ”ë‹¤.

- `map()` ì€ Justê°€ ê°–ê³  ìˆëŠ” ê°’ì— ì¸ìë¡œ ì „ë‹¬ ë°›ì€ í•¨ìˆ˜ë¥¼ ë§¤í•‘í•˜ì—¬ ê°’ì— ì ìš©í•œ ë‹¤ìŒ, ë‹¤ì‹œ ì»¨í…Œì´ë„ˆ(Just / Nothing)ì— Wrappingí•œë‹¤.

- Justì˜ `getOrElse()` ëŠ” ê°–ê³  ìˆëŠ” ê°’ì„ ê·¸ëŒ€ë¡œ ë¦¬í„´í•œë‹¤. ì•„ë˜ì—ì„œ í™•ì¸í•˜ê² ì§€ë§Œ ë°˜ëŒ€ë¡œ Nothingì˜ getOrElse()ëŠ” ì¸ìë¡œ ë°›ì€ ê°’ì„ ê·¸ëŒ€ë¡œ ë¦¬í„´í•œë‹¤. ë‚´ë¶€ì—ì„œ ê°€ì§€ê³  ìˆëŠ” ê°’ì´ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.

## 3) Nothing ëª¨ë‚˜ë“œ êµ¬í˜„

```tsx
class Nothing extends Maybe {
  map(f) {
    return this;
  }

  get value() {
    throw new TypeError("Nothingì˜ ê°’ì€ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
  }

  getOrElse(other) {
    return other; // ìë£Œ êµ¬ì¡°ì˜ ê°’ì€ ë¬´ì‹œí•˜ê³  ë¬´ì¡°ê±´ ì¸ìë¡œ ë°›ì€ ê°’ì„ ë¦¬í„´í•¨
  }

  filter(f) {
    return this._value;
  }

  chain(f) {
    return this;
  }
}
```

- Nothingì˜ valueëŠ” ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ valueë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ì—ëŸ¬ë¥¼ ë˜ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

- ìœ„ì—ì„œ ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼ Nothingì˜ getOrElseëŠ” ìë£Œ êµ¬ì¡°ì˜ ê°’ì€ ë¬´ì‹œí•˜ê³  ë¬´ì¡°ê±´ ì¸ìë¡œ ë°›ì€ ê°’ì„ ë¦¬í„´í•œë‹¤.

- mapì´ë‚˜ chainì„ ê±¸ì–´ì£¼ì—ˆì„ ë•Œë„ ì•„ë¬´ ì¼ë„ í•˜ì§€ ì•Šê³  ìê¸° ìì‹ ë§Œì„ ë¦¬í„´í•œë‹¤.

## 4) ì´ ì •ë¦¬!

ì´ì œ ì²« ë²ˆì§¸ ì±•í„°ì—ì„œ ë´¤ë˜ ì˜ë¯¸ë¶ˆëª…ì˜ ì˜ˆì œ ì½”ë“œë¥¼ ë‹¤ì‹œ êº¼ë‚´ì™€ì„œ Maybeì˜ ë‚´ë¶€ êµ¬í˜„ê³¼ í•¨ê»˜ í™•ì¸í•´ë³´ì.

```tsx
const find = (db, id) => // nullable(null, undefined)ì„ ë˜ì§ˆ ìˆ˜ë„ ìˆëŠ” ë¡œì§
const safeFindStudent = R.curry((db, id) => Maybe.fromNullable(find(db, id)))

// R.prop('x')({ x: 100 }); // 100, ê°ì²´ì—ì„œ íŠ¹ì • í‚¤ ê°’ì— í•´ë‹¹í•˜ëŠ” valueë¥¼ ë½‘ëŠ” ì—°ì‚°
// ì„¸ ì†ì„± ì¤‘ í•˜ë‚˜ë¼ë„ ê²°ê³¼ê°€ Nothing ëª¨ë‚˜ë“œë¼ë©´ ì´í›„ ì—°ì‚°ì€ ì „ë¶€ ê±´ë„ˆ ëœ€
const getCountry = (student) => student
	.map(R.prop("school"))
	.map(R.prop("address"))
	.map(R.prop("country"))
	.getOrElse("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” êµ­ê°€ì…ë‹ˆë‹¤!") // Maybe.getOrElse()

// R.compose - ì¸ìë¡œ ë°›ì€ í•¨ìˆ˜ë¥¼ ë’¤ì—ì„œ ì•ìœ¼ë¡œ ì‹¤í–‰í•´ë‚˜ê°
const country = R.compose(
	getCountry,
	safeFindStudent
);
```

ìœ„ ì˜ˆì œì—ì„œ `getCountry`ì˜ ì¸ìë¡œ ë“¤ì–´ì˜¤ëŠ” studentëŠ” Maybeì´ë‹¤. ë”°ë¼ì„œ ì„¸ map ì—°ì‚° ì¤‘ ì–´ëŠ ê²ƒì´ë¼ë„ nullì„ ë¦¬í„´í•˜ê²Œ ë˜ë©´ í›„ì† ì—°ì‚°ì€ ëª¨ë‘ Nothingì´ ë˜ê³ , Nothingì˜ mapì€ thisë¥¼ ë¦¬í„´í•˜ë¯€ë¡œ ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤. ì„ ì–¸ì ìœ¼ë¡œ ê²°ê³¼ë¥¼ ë„ì¶œí•˜ë©´ì„œ ë™ì‹œì— ë„ ê°’ê¹Œì§€ í—ˆìš©í•˜ëŠ” ë¡œì§ì´ ë˜ì—ˆë‹¤!

ì´ì™¸ì—ë„ ì˜ˆìƒí•˜ì§€ ëª»í•œ ì—ëŸ¬ ë“±ì„ ëŒ€ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” ì•ì„œ ì–¸ê¸‰í–ˆë“¯ `Either` ëª¨ë‚˜ë“œê°€, ì…ì¶œë ¥ì—ëŠ” `IO` ëª¨ë‚˜ë“œê°€ ì‚¬ìš©ëœë‹¤. í•˜ì§€ë§Œ ëª¨ë“  ëª¨ë‚˜ë“œë¥¼ ë‹¤ ë‹¤ë£° ìˆ˜ ì—†ê³ , ëª¨ë‚˜ë“œì˜ ì¢…ë¥˜ë„ ì •ë§ ë‹¤ì–‘í•˜ë¯€ë¡œ ê°™ì´ ì‚´í´ë³¸ ë‚´ìš©ë“¤ì— ëŒ€í•œ ì´í•´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¡°ê¸ˆ ë” ì°¾ì•„ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

ì°¸ê³  ë„ì„œì˜ ìµœì¢… ê²°ê³¼ë¬¼ì€ ì•„ë˜ì™€ ê°™ë‹¤.

```tsx
const getOrElse = R.curry((message, container) => container.getOrElse(message));

// ê°’ì„ ì½ì–´ì„œ í•™ìƒ ì •ë³´ë¥¼ DOMì— ì¶œë ¥
const showStudent = R.compose(
  map(append("#student-info")),
  liftIO,
  getOrElse("í•™ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
  map(csv),
  map(R.props(["ssn", "firstname", "lastname"])),
  chain(findStudent),
  chain(checkLengthSsn),
  lift(cleanInput)
);
```

# 4. ì°¸ê³  ìë£Œ

- ë£¨ì´ìŠ¤ ì•„í…ì‹œì˜¤ - í•¨ìˆ˜í˜• ìë°”ìŠ¤í¬ë¦½íŠ¸
- ìœ ì¸ë™ - í•¨ìˆ˜í˜• ìë°”ìŠ¤í¬ë¦½íŠ¸ í”„ë¡œê·¸ë˜ë°
- ì „ì˜ˆí™ - Do it íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ í”„ë¡œê·¸ë˜ë°
